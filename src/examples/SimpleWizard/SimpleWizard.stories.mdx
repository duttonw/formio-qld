import { Canvas, Meta, Story } from "@storybook/addon-docs";
import * as FormioLoader from "../../helpers/FormioLoader";

<Meta title="Examples/SimpleWizard" />

# Simple wizard example

This example show the default presentation of a wizard form.

The demo can be reproduced with `FormioScript` to lazy load the Formio library and scripts.

export function createSimpleWizard() {
  const div = document.createElement("div");
  setTimeout(() => {
    FormioLoader.initFormio();
  });
  div.innerHTML = `
        <div id="formio" 
          class="qg-forms-v2"
          data-formio 
          data-formio-project-name="dev-svcwlpuksmwawwk" 
          data-formio-form-name="simpleWizard" 
          data-formio-env-url="api.forms.platforms.qld.gov.au" 
        ></div>
      `;
  return div;
}

export const createSimpleWizardCode = `
<head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://static.qgov.net.au/formio-qld/v1/v1.x.x-latest/formio-script.prod.min.js"></script>
</head>
<body>
  <script>
${createSimpleWizard
  .toString()
  .replaceAll(
    "_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_3__",
    "FormLoader"
  )}
    FormioScript.init().then(() => {
      const div = createSimpleWizard();
      document.body.append(div);
    });
  </script>
</body>
`;

<Canvas withSource="open">
  <Story
    name="simpleWizard"
    parameters={{
      docs: {
        source: {
          code: createSimpleWizardCode,
        },
      },
    }}
  >
    {() => createSimpleWizard()}
  </Story>
</Canvas>
