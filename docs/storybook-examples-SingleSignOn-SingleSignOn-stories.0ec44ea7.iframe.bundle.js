/*! For license information please see storybook-examples-SingleSignOn-SingleSignOn-stories.0ec44ea7.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkformio_qld=self.webpackChunkformio_qld||[]).push([["examples-SingleSignOn-SingleSignOn-stories"],{"./src/examples/SingleSignOn/SingleSignOn.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SsoDemo:()=>SsoDemo,SsoUnauth:()=>SsoUnauth,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _SsoDemo$parameters,_SsoDemo$parameters2,_SsoUnauth$parameters,_SsoUnauth$parameters2,_stories_SingleSignOn__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/examples/SingleSignOn/stories/SingleSignOn.js?5742"),_stories_SingleSignOn_code__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/examples/SingleSignOn/stories/SingleSignOn.code.js"),_stories_SSOUnauth__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/examples/SingleSignOn/stories/SSOUnauth.js?24de"),_stories_SSOUnauth_code__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/examples/SingleSignOn/stories/SSOUnauth.code.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Examples/SingleSignOn"},SsoDemo={render:()=>(0,_stories_SingleSignOn__WEBPACK_IMPORTED_MODULE_0__.SingleSignOn)(),name:"ssoDemo",parameters:{docs:{source:{code:_stories_SingleSignOn_code__WEBPACK_IMPORTED_MODULE_1__.singleSignOnCode,language:"html"}}}},SsoUnauth={render:()=>(0,_stories_SSOUnauth__WEBPACK_IMPORTED_MODULE_2__.SSOUnauth)(),name:"ssoUnauth",parameters:{docs:{source:{code:_stories_SSOUnauth_code__WEBPACK_IMPORTED_MODULE_3__.SSOUnauthCode,language:"html"}}}};SsoDemo.parameters={...SsoDemo.parameters,docs:{...null===(_SsoDemo$parameters=SsoDemo.parameters)||void 0===_SsoDemo$parameters?void 0:_SsoDemo$parameters.docs,source:{originalSource:'{\n  render: () => SingleSignOn(),\n  name: "ssoDemo",\n  parameters: {\n    docs: {\n      source: {\n        code: singleSignOnCode,\n        language: "html"\n      }\n    }\n  }\n}',...null===(_SsoDemo$parameters2=SsoDemo.parameters)||void 0===_SsoDemo$parameters2||null===(_SsoDemo$parameters2=_SsoDemo$parameters2.docs)||void 0===_SsoDemo$parameters2?void 0:_SsoDemo$parameters2.source}}},SsoUnauth.parameters={...SsoUnauth.parameters,docs:{...null===(_SsoUnauth$parameters=SsoUnauth.parameters)||void 0===_SsoUnauth$parameters?void 0:_SsoUnauth$parameters.docs,source:{originalSource:'{\n  render: () => SSOUnauth(),\n  name: "ssoUnauth",\n  parameters: {\n    docs: {\n      source: {\n        code: SSOUnauthCode,\n        language: "html"\n      }\n    }\n  }\n}',...null===(_SsoUnauth$parameters2=SsoUnauth.parameters)||void 0===_SsoUnauth$parameters2||null===(_SsoUnauth$parameters2=_SsoUnauth$parameters2.docs)||void 0===_SsoUnauth$parameters2?void 0:_SsoUnauth$parameters2.source}}};const __namedExportsOrder=["SsoDemo","SsoUnauth"]},"./src/config/createForm.controller.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils_pushDataLayer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/pushDataLayer.js");const __WEBPACK_DEFAULT_EXPORT__=_ref=>{let{form,formConfirmation}=_ref;form.on("change",(e=>{void 0!==e.changed&&void 0!==e.changed.component&&(0,_utils_pushDataLayer__WEBPACK_IMPORTED_MODULE_0__.pushDataLayer)({event:"formio-interaction","formio-input-id":e.changed.component.id,"formio-input-type":e.changed.component.type,"formio-input-value":e.changed.value,"formio-input-key":e.changed.component.key,"formio-input-label-raw":e.changed.component.label,"formio-name":form._form.title,"formio-version":form._form.modified,"formio-category":"Form: ".concat(form._form.title),"formio-action":"filled in"})})),form.on("applicationSubmit",(()=>{form.submit()})),form.on("submitDone",(()=>{(0,_utils_pushDataLayer__WEBPACK_IMPORTED_MODULE_0__.pushDataLayer)({event:"formio-submission","formio-submissionsUrl":"form.io: ".concat(form.formio.submissionsUrl),"formio-name":form._form.title,"formio-version":form._form.modified}),formConfirmation&&setTimeout((()=>{window.location.href=formConfirmation}),500)})),form.on("submitError",(error=>{const msg=Array.isArray(error)?error.map((o=>o.message)).join(", "):(null==error?void 0:error.message)||error;(0,_utils_pushDataLayer__WEBPACK_IMPORTED_MODULE_0__.pushDataLayer)({event:"ngErrorEvent",ngErrorLocation:"form.io - ".concat(form._form.title),ngErrorMsg:msg,ngErrorStack:""})}))}},"./src/config/createForm.options.js":module=>{module.exports={buttonSettings:{showCancel:!1,showPrevious:!0,showNext:!0,showSubmit:!0},i18n:{en:{pattern:"Must use the format shown",error:'<h2><span class="fa fa-exclamation-triangle"></span> Please check your answers</h2>'}}}},"./src/examples/SingleSignOn/stories/SSOUnauth.code.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SSOUnauthCode:()=>SSOUnauthCode});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/index.js"),_SSOUnauth__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/examples/SingleSignOn/stories/SSOUnauth.js?1f64");const SSOUnauthCode='\n<head>\n  <script src="https://static.qgov.net.au/formio-qld/v1/v1.x.x-latest/formio-script.min.js"><\/script>\n</head>\n<body>\n  <script>\n'.concat((0,_utils__WEBPACK_IMPORTED_MODULE_0__.indent)(_SSOUnauth__WEBPACK_IMPORTED_MODULE_1__.SSOUnauth.toString().replaceAll("_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__","FormioLoader"),2),"\n    FormioScript.init().then(() => {\n      const div = SingleSignOn();\n      document.body.append(div);\n    });\n  <\/script>\n</body>\n")},"./src/examples/SingleSignOn/stories/SSOUnauth.js?24de":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SSOUnauth:()=>SSOUnauth});var _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/FormioLoader/index.js");function SSOUnauth(){const div=document.createElement("div");div.innerHTML='\n    <div id="formio">\n      <img src="https://www.qld.gov.au/__data/assets/image/0019/126703/Spinner-1s-200px.png"/>\n    </div>\n    ';const formioDiv=div.querySelector("#formio");return _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(formioDiv,{projectName:"ncwawujlwylhrfy",formName:"devauthformstorybook",envUrl:"api.forms.platforms.qld.gov.au"}),div}},"./src/examples/SingleSignOn/stories/SingleSignOn.code.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{singleSignOnCode:()=>singleSignOnCode});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/index.js"),_SingleSignOn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/examples/SingleSignOn/stories/SingleSignOn.js?2cdb");const singleSignOnCode='\n<head>\n  <script src="https://static.qgov.net.au/formio-qld/v1/v1.x.x-latest/formio-script.min.js"><\/script>\n</head>\n<body>\n  <script>\n'.concat((0,_utils__WEBPACK_IMPORTED_MODULE_0__.indent)(_SingleSignOn__WEBPACK_IMPORTED_MODULE_1__.SingleSignOn.toString().replaceAll("_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__","FormioLoader"),2),"\n    FormioScript.init().then(() => {\n      const div = SingleSignOn();\n      document.body.append(div);\n    });\n  <\/script>\n</body>\n")},"./src/examples/SingleSignOn/stories/SingleSignOn.js?5742":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SingleSignOn:()=>SingleSignOn});var _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/FormioLoader/index.js");function SingleSignOn(){const namespace="formio_".concat("ncwawujlwylhrfy"),div=document.createElement("div");let oidcform,formioDiv,loadingLayer;const resetDiv=()=>{div.innerHTML='\n    <div id="oidc_form"></div>\n    <div id="formio"></div>\n    <div id="loading-layer" style="background-image: url(https://www.qld.gov.au/__data/assets/image/0019/126703/Spinner-1s-200px.png); width: 100%; height: 100%; min-height:200px; display: block; top: 0; position: fixed; background-repeat: no-repeat; background-position: center; opacity: 0.5; background-color: white;"></div>\n    ',oidcform=div.querySelector("#oidc_form"),formioDiv=div.querySelector("#formio"),loadingLayer=div.querySelector("#loading-layer")},setLoading=loading=>{loadingLayer&&(loadingLayer.style.display=loading?"block":"none")},pickForm=()=>{const user=Formio.getUser({namespace});console.info("user",user),setLoading(!0),user?realFormSetup():loginFormSetup()},logout=form=>{var _user$data;const user=Formio.getUser({namespace});let param="";null!=user&&null!==(_user$data=user.data)&&void 0!==_user$data&&_user$data.idp_type&&"employee"===user.data.idp_type&&(param="&initiating_idp=o365"),Formio.logout(form.formio,{namespace}).then((()=>{const{origin,pathname}=window.location,popup=window.open("https://www.uat.auth.qld.gov.au/auth/realms/tell-us-once/protocol/openid-connect/logout?redirect_uri=".concat(origin).concat(pathname).concat(param),"_logout","location=no,height=100,width=100,scrollbars=no,status=no");window.popup=popup;const timer=setInterval((()=>{let popupOrigin;try{popupOrigin=popup.location.origin}catch(Error){popupOrigin=""}popupOrigin&&(clearInterval(timer),popup.close(),resetDiv(),pickForm())}),500)}))},realFormSetup=()=>{console.info("Found user, redirecting to the form...");_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(formioDiv,{projectName:"ncwawujlwylhrfy",formName:"devauthformstorybook",envUrl:"api.forms.platforms.qld.gov.au",namespace,createFormController:_ref=>{let{form}=_ref;form.on("submitDone",(function submitDoneCleanup(submission){console.info("submission",submission),setLoading(!0),logout(form)})),form.on("logout",(()=>{logout(form),setLoading(!0)})),form.on("initialized",(()=>{setLoading(!1)}))}})},loginFormSetup=()=>{console.info("No current user, rendering oidc sso form...");_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(oidcform,{projectName:"ncwawujlwylhrfy",formName:"oidcsso",envUrl:"api.forms.platforms.qld.gov.au",namespace,createFormController:_ref2=>{let{form}=_ref2;console.info("Loaded form: ".concat(form.formio.formUrl),form),form.on("submitDone",(submission=>{console.info("submission",submission),setLoading(!0),form.formio.currentUser({namespace}).then((userDetails=>{console.info("userDetails",userDetails),resetDiv(),pickForm()}))})),form.on("error",(()=>{setLoading(!1)})),form.on("submitError",(()=>{logout(form)})),form.on("initialized",(()=>{setLoading(!1)}))}})};return resetDiv(),setTimeout((()=>{pickForm()})),div}},"./src/helpers/FormioLoader/FormioLoader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{initFormio:()=>initFormio,initFormioInstance:()=>initFormioInstance});var _config_createForm_options__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/config/createForm.options.js"),_config_createForm_options__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_config_createForm_options__WEBPACK_IMPORTED_MODULE_0__),_config_createForm_controller__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/config/createForm.controller.js"),_utils_delegateSelector__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/delegateSelector.js");const requestPluginHandler=(requestArgs,opts)=>{var _requestArgs$url;if(null!=requestArgs&&requestArgs.formio){const formioInstance=document.querySelector('[data-formio-form-url="'.concat(requestArgs.formio.formUrl,'"]'));formioInstance&&(requestArgs.formio=JSON.parse(formioInstance.dataset.formio),requestArgs.opts.formio=requestArgs.formio),requestArgs.formio.options&&(requestArgs.opts.base=requestArgs.formio.options.base,requestArgs.opts.project=requestArgs.formio.options.project,requestArgs.opts.namespace=requestArgs.formio.options.namespace,requestArgs.formio.options.project&&Formio.setProjectUrl(requestArgs.formio.options.project),requestArgs.formio.options.base&&Formio.setBaseUrl(requestArgs.formio.options.base))}return null!=requestArgs&&null!==(_requestArgs$url=requestArgs.url)&&void 0!==_requestArgs$url&&_requestArgs$url.includes("".concat(opts.formio.base,"/recaptcha"))&&(requestArgs.url=requestArgs.url.replace("".concat(opts.formio.base,"/recaptcha"),"".concat(opts.formio.projectUrl,"/recaptcha"))),Promise.resolve(null)},initFormioInstance=(elem,opts)=>{if(elem.dataset.formioFormUrl)return;if(!opts.envUrl||!opts.projectName||!opts.formName)return void console.warn("Require envUrl, projectName, formName to initiate the form.",opts);const baseUrl="https://".concat(opts.envUrl.trim());let formName="";formName=opts.formRevision?"".concat(opts.formName,"/v/").concat(opts.formRevision):opts.formName;const{projectName}=opts,namespace=opts.namespace||"formio-".concat(projectName),formUrl="".concat(baseUrl,"/").concat(projectName,"/").concat(formName),formio=new Formio(formUrl,{base:baseUrl,project:"".concat(baseUrl,"/").concat(projectName),namespace});elem.dataset.formio=JSON.stringify(formio),elem.dataset.formioFormUrl=formUrl;const defaultOptions={..._config_createForm_options__WEBPACK_IMPORTED_MODULE_0___default(),formio,namespace:formio.options.namespace},combinedOptions={...defaultOptions,..."function"==typeof opts.createFormOptions&&opts.createFormOptions({...opts,defaultOptions,elem})};Formio.getPlugin("requestPlugin")||Formio.registerPlugin((opts=>({priority:0,preRequest:requestArgs=>requestPluginHandler(requestArgs,opts),preStaticRequest:requestArgs=>requestPluginHandler(requestArgs,opts),request:requestArgs=>requestPluginHandler(requestArgs,opts),staticRequest:requestArgs=>requestPluginHandler(requestArgs,opts)}))(combinedOptions),"requestPlugin"),Formio.createForm(elem,formUrl,combinedOptions).then((form=>{form.formio=formio,form.options.formio=formio;const callbackProps={form,elem,...opts};"function"==typeof opts.createFormCallback?opts.createFormCallback(callbackProps):(0,_utils_delegateSelector__WEBPACK_IMPORTED_MODULE_1__.delegateSelector)(elem,"click","a",(e=>{e.target.target="_blank"})),(0,_config_createForm_controller__WEBPACK_IMPORTED_MODULE_2__.default)(callbackProps),"function"==typeof opts.createFormController&&opts.createFormController(callbackProps)}))},overrideErrorForm=renderMsg=>{const newFunc=Formio.Form.prototype.errorForm.bind({});Formio.Form.prototype.errorForm=err=>"string"==typeof err&&-1!==err.indexOf("Could not connect to API server")||"object"==typeof err&&err.networkError?(console.warn("formio error: ",err),newFunc("function"==typeof renderMsg?renderMsg(err):err)):newFunc(err)},initFormio=()=>{Formio.icons="fontawesome",premium&&Formio.use(premium),"function"==typeof window.initFormioHook?window.initFormioHook({overrideErrorForm}):overrideErrorForm((()=>"This form is currently unavailable due to maintenance. Please try again later.")),document.querySelectorAll("[data-formio]").forEach((elem=>{const{formioProjectName,formioFormName,formioEnvUrl,formioPdfDownload,formioFormConfirmation,formioFormRevision,formioNamespace,formioCreateformOptions,formioCreateformController,formioCreateformCallback}=elem.dataset;initFormioInstance(elem,{projectName:formioProjectName,formName:formioFormName,envUrl:formioEnvUrl,pdfDownload:formioPdfDownload,formConfirmation:formioFormConfirmation,formRevision:formioFormRevision,namespace:formioNamespace,createFormOptions:window[formioCreateformOptions],createFormController:window[formioCreateformController],createFormCallback:window[formioCreateformCallback]})}))}},"./src/helpers/FormioLoader/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{initFormio:()=>_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormio,initFormioInstance:()=>_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance});var _FormioLoader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/FormioLoader/FormioLoader.js")},"./src/utils/createBuilder.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{createBuilder:()=>createBuilder});const createBuilder=_ref=>{let{form={},options={},controller}=_ref;const div=document.createElement("div");return setTimeout((()=>{Formio.builder(div,form,options).then(controller)}),100),div}},"./src/utils/createForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{createForm:()=>createForm});var _config_createForm_options__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/config/createForm.options.js"),_config_createForm_options__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_config_createForm_options__WEBPACK_IMPORTED_MODULE_0__),_config_createForm_controller__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/config/createForm.controller.js");const createForm=_ref=>{let{form={},options,controller}=_ref;const div=document.createElement("div");return div.className="qg-forms-v2",setTimeout((()=>{Formio.createForm(div,form,{..._config_createForm_options__WEBPACK_IMPORTED_MODULE_0___default(),...options}).then((thisForm=>{(0,_config_createForm_controller__WEBPACK_IMPORTED_MODULE_1__.default)({form:thisForm,elem:div}),"function"==typeof controller&&controller(thisForm)}))}),100),div}},"./src/utils/delegateSelector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{delegateSelector:()=>delegateSelector});const delegateSelector=(elements,event,childSelector,handler)=>{const addEvent=el=>{el.addEventListener(event,(e=>{((el,s)=>(el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector).call(el,s))(e.target,childSelector)&&handler(e)}))};Array.isArray(elements)?[].forEach.call(elements,addEvent):addEvent(elements)}},"./src/utils/indent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function indent(str,numOfIndents){let spacesPerIndent=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const newStr=str.replace(/^(?=.)/gm,new Array(numOfIndents+1).join("\t")),newNumOfIndents=new Array(spacesPerIndent+1||0).join(" ");return spacesPerIndent?newStr.replace(/\t+/g,(tabs=>tabs.replace(/./g,newNumOfIndents))):newStr}__webpack_require__.d(__webpack_exports__,{indent:()=>indent})},"./src/utils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{createBuilder:()=>_createBuilder__WEBPACK_IMPORTED_MODULE_0__.createBuilder,createForm:()=>_createForm__WEBPACK_IMPORTED_MODULE_1__.createForm,indent:()=>_indent__WEBPACK_IMPORTED_MODULE_2__.indent});var _createBuilder__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/createBuilder.js"),_createForm__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/createForm.js"),_indent__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/indent.js")},"./src/utils/pushDataLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{pushDataLayer:()=>pushDataLayer});const pushDataLayer=data=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push(data)}},"./src/examples/SingleSignOn/stories/SSOUnauth.js?1f64":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SSOUnauth:()=>SSOUnauth});var _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/FormioLoader/index.js");function SSOUnauth(){const div=document.createElement("div");div.innerHTML='\n    <div id="formio">\n      <img src="https://www.qld.gov.au/__data/assets/image/0019/126703/Spinner-1s-200px.png"/>\n    </div>\n    ';const formioDiv=div.querySelector("#formio");return _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(formioDiv,{projectName:"ncwawujlwylhrfy",formName:"devauthformstorybook",envUrl:"api.forms.platforms.qld.gov.au"}),div}},"./src/examples/SingleSignOn/stories/SingleSignOn.js?2cdb":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SingleSignOn:()=>SingleSignOn});var _helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/FormioLoader/index.js");function SingleSignOn(){const namespace="formio_ncwawujlwylhrfy",div=document.createElement("div");let oidcform,formioDiv,loadingLayer;const resetDiv=()=>{div.innerHTML='\n    <div id="oidc_form"></div>\n    <div id="formio"></div>\n    <div id="loading-layer" style="background-image: url(https://www.qld.gov.au/__data/assets/image/0019/126703/Spinner-1s-200px.png); width: 100%; height: 100%; min-height:200px; display: block; top: 0; position: fixed; background-repeat: no-repeat; background-position: center; opacity: 0.5; background-color: white;"></div>\n    ',oidcform=div.querySelector("#oidc_form"),formioDiv=div.querySelector("#formio"),loadingLayer=div.querySelector("#loading-layer")},setLoading=loading=>{loadingLayer&&(loadingLayer.style.display=loading?"block":"none")},pickForm=()=>{const user=Formio.getUser({namespace});console.info("user",user),setLoading(!0),user?realFormSetup():loginFormSetup()},logout=form=>{const user=Formio.getUser({namespace});let param="";user?.data?.idp_type&&"employee"===user.data.idp_type&&(param="&initiating_idp=o365"),Formio.logout(form.formio,{namespace}).then((()=>{const{origin,pathname}=window.location,popup=window.open(`https://www.uat.auth.qld.gov.au/auth/realms/tell-us-once/protocol/openid-connect/logout?redirect_uri=${origin}${pathname}${param}`,"_logout","location=no,height=100,width=100,scrollbars=no,status=no");window.popup=popup;const timer=setInterval((()=>{let popupOrigin;try{popupOrigin=popup.location.origin}catch(Error){popupOrigin=""}popupOrigin&&(clearInterval(timer),popup.close(),resetDiv(),pickForm())}),500)}))},realFormSetup=()=>{console.info("Found user, redirecting to the form...");_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(formioDiv,{projectName:"ncwawujlwylhrfy",formName:"devauthformstorybook",envUrl:"api.forms.platforms.qld.gov.au",namespace,createFormController:({form})=>{form.on("submitDone",(function submitDoneCleanup(submission){console.info("submission",submission),setLoading(!0),logout(form)})),form.on("logout",(()=>{logout(form),setLoading(!0)})),form.on("initialized",(()=>{setLoading(!1)}))}})},loginFormSetup=()=>{console.info("No current user, rendering oidc sso form...");_helpers_FormioLoader__WEBPACK_IMPORTED_MODULE_0__.initFormioInstance(oidcform,{projectName:"ncwawujlwylhrfy",formName:"oidcsso",envUrl:"api.forms.platforms.qld.gov.au",namespace,createFormController:({form})=>{console.info(`Loaded form: ${form.formio.formUrl}`,form),form.on("submitDone",(submission=>{console.info("submission",submission),setLoading(!0),form.formio.currentUser({namespace}).then((userDetails=>{console.info("userDetails",userDetails),resetDiv(),pickForm()}))})),form.on("error",(()=>{setLoading(!1)})),form.on("submitError",(()=>{logout(form)})),form.on("initialized",(()=>{setLoading(!1)}))}})};return resetDiv(),setTimeout((()=>{pickForm()})),div}}}]);